import{_ as c,r as a,o as l,c as p,b as n,d as e,e as s,w as r,a as o}from"./app-304f5532.js";const d={},u=n("h1",{id:"http-component",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#http-component","aria-hidden":"true"},"#"),e(" HTTP Component")],-1),m=n("h2",{id:"_1-what-is-http",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-what-is-http","aria-hidden":"true"},"#"),e(" 1. What is HTTP")],-1),v={class:"theorem"},h=n("p",{class:"title"},"Remote Procedure Call",-1),k=n("p",null,"Hypertext Transfer Protocol (HTTP) is an application-layer protocol used for distributed, collaborative, and hypermedia information systems. It serves as the foundation for data communication on the World Wide Web.",-1),b=n("p",null,"The initial purpose of designing HTTP was to provide a method for publishing and retrieving HTML pages. Resources requested through HTTP or HTTPS are identified by Uniform Resource Identifiers (URIs).",-1),g=n("p",null,'HTTP is a standard for request and response between a client (user) and a server (website), typically using the TCP protocol. The client, often a web browser, network crawler, or other tools, initiates an HTTP request to a specified port on the server (default port 80). The client is referred to as the user agent. The server stores resources, such as HTML files and images, and is referred to as the origin server. There may be multiple "intermediary" layers between the user agent and the origin server, such as proxy servers, gateways, or tunnels.',-1),T={class:"custom-container right"},C={href:"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol",target:"_blank",rel:"noopener noreferrer"},B=n("h2",{id:"_2-why-fasthttp",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-why-fasthttp","aria-hidden":"true"},"#"),e(" 2.Why fasthttp")],-1),P={class:"theorem"},f=n("p",{class:"title"},null,-1),_={id:"http-server-performance-comparison-with-net-http",tabindex:"-1"},q=n("a",{class:"header-anchor",href:"#http-server-performance-comparison-with-net-http","aria-hidden":"true"},"#",-1),G={href:"https://pkg.go.dev/net/http",target:"_blank",rel:"noopener noreferrer"},w=o(`<p>In short, fasthttp server is up to 10 times faster than net/http. Below are benchmark results.</p><p><em>GOMAXPROCS=1</em></p><p>net/http server:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ GOMAXPROCS=1 go test -bench=NetHTTPServerGet -benchmem -benchtime=10s
BenchmarkNetHTTPServerGet1ReqPerConn                	 1000000	     12052 ns/op	    2297 B/op	      29 allocs/op
BenchmarkNetHTTPServerGet2ReqPerConn                	 1000000	     12278 ns/op	    2327 B/op	      24 allocs/op
BenchmarkNetHTTPServerGet10ReqPerConn               	 2000000	      8903 ns/op	    2112 B/op	      19 allocs/op
BenchmarkNetHTTPServerGet10KReqPerConn              	 2000000	      8451 ns/op	    2058 B/op	      18 allocs/op
BenchmarkNetHTTPServerGet1ReqPerConn10KClients      	  500000	     26733 ns/op	    3229 B/op	      29 allocs/op
BenchmarkNetHTTPServerGet2ReqPerConn10KClients      	 1000000	     23351 ns/op	    3211 B/op	      24 allocs/op
BenchmarkNetHTTPServerGet10ReqPerConn10KClients     	 1000000	     13390 ns/op	    2483 B/op	      19 allocs/op
BenchmarkNetHTTPServerGet100ReqPerConn10KClients    	 1000000	     13484 ns/op	    2171 B/op	      18 allocs/op
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>fasthttp server:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ GOMAXPROCS=1 go test -bench=kServerGet -benchmem -benchtime=10s
BenchmarkServerGet1ReqPerConn                       	10000000	      1559 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet2ReqPerConn                       	10000000	      1248 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet10ReqPerConn                      	20000000	       797 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet10KReqPerConn                     	20000000	       716 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet1ReqPerConn10KClients             	10000000	      1974 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet2ReqPerConn10KClients             	10000000	      1352 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet10ReqPerConn10KClients            	20000000	       789 ns/op	       2 B/op	       0 allocs/op
BenchmarkServerGet100ReqPerConn10KClients           	20000000	       604 ns/op	       0 B/op	       0 allocs/op
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>GOMAXPROCS=4</em></p><p>net/http server:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ GOMAXPROCS=4 go test -bench=NetHTTPServerGet -benchmem -benchtime=10s
BenchmarkNetHTTPServerGet1ReqPerConn-4                  	 3000000	      4529 ns/op	    2389 B/op	      29 allocs/op
BenchmarkNetHTTPServerGet2ReqPerConn-4                  	 5000000	      3896 ns/op	    2418 B/op	      24 allocs/op
BenchmarkNetHTTPServerGet10ReqPerConn-4                 	 5000000	      3145 ns/op	    2160 B/op	      19 allocs/op
BenchmarkNetHTTPServerGet10KReqPerConn-4                	 5000000	      3054 ns/op	    2065 B/op	      18 allocs/op
BenchmarkNetHTTPServerGet1ReqPerConn10KClients-4        	 1000000	     10321 ns/op	    3710 B/op	      30 allocs/op
BenchmarkNetHTTPServerGet2ReqPerConn10KClients-4        	 2000000	      7556 ns/op	    3296 B/op	      24 allocs/op
BenchmarkNetHTTPServerGet10ReqPerConn10KClients-4       	 5000000	      3905 ns/op	    2349 B/op	      19 allocs/op
BenchmarkNetHTTPServerGet100ReqPerConn10KClients-4      	 5000000	      3435 ns/op	    2130 B/op	      18 allocs/op
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>fasthttp server:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ GOMAXPROCS=4 go test -bench=kServerGet -benchmem -benchtime=10s
BenchmarkServerGet1ReqPerConn-4                         	10000000	      1141 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet2ReqPerConn-4                         	20000000	       707 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet10ReqPerConn-4                        	30000000	       341 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet10KReqPerConn-4                       	50000000	       310 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet1ReqPerConn10KClients-4               	10000000	      1119 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet2ReqPerConn10KClients-4               	20000000	       644 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet10ReqPerConn10KClients-4              	30000000	       346 ns/op	       0 B/op	       0 allocs/op
BenchmarkServerGet100ReqPerConn10KClients-4             	50000000	       282 ns/op	       0 B/op	       0 allocs/op
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="http-client-comparison-with-net-http" tabindex="-1"><a class="header-anchor" href="#http-client-comparison-with-net-http" aria-hidden="true">#</a> HTTP client comparison with net/http</h2><p>In short, fasthttp client is up to 10 times faster than net/http. Below are benchmark results.</p><p><em>GOMAXPROCS=1</em></p><p>net/http client:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ GOMAXPROCS=1 go test -bench=&#39;HTTPClient(Do|GetEndToEnd)&#39; -benchmem -benchtime=10s
BenchmarkNetHTTPClientDoFastServer                  	 1000000	     12567 ns/op	    2616 B/op	      35 allocs/op
BenchmarkNetHTTPClientGetEndToEnd1TCP               	  200000	     67030 ns/op	    5028 B/op	      56 allocs/op
BenchmarkNetHTTPClientGetEndToEnd10TCP              	  300000	     51098 ns/op	    5031 B/op	      56 allocs/op
BenchmarkNetHTTPClientGetEndToEnd100TCP             	  300000	     45096 ns/op	    5026 B/op	      55 allocs/op
BenchmarkNetHTTPClientGetEndToEnd1Inmemory          	  500000	     24779 ns/op	    5035 B/op	      57 allocs/op
BenchmarkNetHTTPClientGetEndToEnd10Inmemory         	 1000000	     26425 ns/op	    5035 B/op	      57 allocs/op
BenchmarkNetHTTPClientGetEndToEnd100Inmemory        	  500000	     28515 ns/op	    5045 B/op	      57 allocs/op
BenchmarkNetHTTPClientGetEndToEnd1000Inmemory       	  500000	     39511 ns/op	    5096 B/op	      56 allocs/op
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>fasthttp client:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ GOMAXPROCS=1 go test -bench=&#39;kClient(Do|GetEndToEnd)&#39; -benchmem -benchtime=10s
BenchmarkClientDoFastServer                         	20000000	       865 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd1TCP                      	 1000000	     18711 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd10TCP                     	 1000000	     14664 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd100TCP                    	 1000000	     14043 ns/op	       1 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd1Inmemory                 	 5000000	      3965 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd10Inmemory                	 3000000	      4060 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd100Inmemory               	 5000000	      3396 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd1000Inmemory              	 5000000	      3306 ns/op	       2 B/op	       0 allocs/op
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>GOMAXPROCS=4</em></p><p>net/http client:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ GOMAXPROCS=4 go test -bench=&#39;HTTPClient(Do|GetEndToEnd)&#39; -benchmem -benchtime=10s
BenchmarkNetHTTPClientDoFastServer-4                    	 2000000	      8774 ns/op	    2619 B/op	      35 allocs/op
BenchmarkNetHTTPClientGetEndToEnd1TCP-4                 	  500000	     22951 ns/op	    5047 B/op	      56 allocs/op
BenchmarkNetHTTPClientGetEndToEnd10TCP-4                	 1000000	     19182 ns/op	    5037 B/op	      55 allocs/op
BenchmarkNetHTTPClientGetEndToEnd100TCP-4               	 1000000	     16535 ns/op	    5031 B/op	      55 allocs/op
BenchmarkNetHTTPClientGetEndToEnd1Inmemory-4            	 1000000	     14495 ns/op	    5038 B/op	      56 allocs/op
BenchmarkNetHTTPClientGetEndToEnd10Inmemory-4           	 1000000	     10237 ns/op	    5034 B/op	      56 allocs/op
BenchmarkNetHTTPClientGetEndToEnd100Inmemory-4          	 1000000	     10125 ns/op	    5045 B/op	      56 allocs/op
BenchmarkNetHTTPClientGetEndToEnd1000Inmemory-4         	 1000000	     11132 ns/op	    5136 B/op	      56 allocs/op
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>fasthttp client:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ GOMAXPROCS=4 go test -bench=&#39;kClient(Do|GetEndToEnd)&#39; -benchmem -benchtime=10s
BenchmarkClientDoFastServer-4                           	50000000	       397 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd1TCP-4                        	 2000000	      7388 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd10TCP-4                       	 2000000	      6689 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd100TCP-4                      	 3000000	      4927 ns/op	       1 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd1Inmemory-4                   	10000000	      1604 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd10Inmemory-4                  	10000000	      1458 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd100Inmemory-4                 	10000000	      1329 ns/op	       0 B/op	       0 allocs/op
BenchmarkClientGetEndToEnd1000Inmemory-4                	10000000	      1316 ns/op	       5 B/op	       0 allocs/op
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,23),R={class:"custom-container right"},S={href:"https://github.com/valyala/fasthttp",target:"_blank",rel:"noopener noreferrer"},E=n("h2",{id:"_3-how-to-use",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_3-how-to-use","aria-hidden":"true"},"#"),e(" 3. How to Use")],-1),H={class:"custom-container tip"},x=n("p",{class:"custom-container-title"},"Note",-1),y=o(`<h3 id="_3-1-startup" tabindex="-1"><a class="header-anchor" href="#_3-1-startup" aria-hidden="true">#</a> 3.1 Startup</h3><p>The <code>initHttpServer</code> function in <code>application/httpserver.go</code> provides service initialization. Call the <code>Server</code> method to start the server.</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// Refer to the HTTP server in cmd/api/server.go:95</span>
application<span class="token punctuation">.</span><span class="token function">HttpServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Server</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-controllers" tabindex="-1"><a class="header-anchor" href="#_3-2-controllers" aria-hidden="true">#</a> 3.2 Controllers</h3><p>Implement a controller.</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> auth

<span class="token keyword">type</span> AuthController <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    http<span class="token punctuation">.</span>HttpController
<span class="token punctuation">}</span>

<span class="token comment">// Login</span>
<span class="token comment">// @Summary Login</span>
<span class="token comment">// @Description user login</span>
<span class="token comment">// @Tags base</span>
<span class="token comment">// @Param deptName body auth.LoginParams true &quot;params&quot;</span>
<span class="token comment">// @Success 200 {object} auth.LoginResp &quot;{&quot;code&quot;: 200, &quot;data&quot;: [...]}&quot;</span>
<span class="token comment">// @Router /api/login [post]</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>AuthController<span class="token punctuation">)</span> <span class="token function">Login</span><span class="token punctuation">(</span>c <span class="token operator">*</span>routing<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> application<span class="token punctuation">.</span><span class="token function">SRpcCall</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> rpcserver<span class="token punctuation">.</span>AuthServer<span class="token punctuation">,</span> rpcserver<span class="token punctuation">.</span>AuthFuncLogin<span class="token punctuation">,</span> <span class="token function">new</span><span class="token punctuation">(</span>auth2<span class="token punctuation">.</span>LoginParams<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">new</span><span class="token punctuation">(</span>auth2<span class="token punctuation">.</span>LoginResp<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-route" tabindex="-1"><a class="header-anchor" href="#_3-3-route" aria-hidden="true">#</a> 3.3 Route</h3><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> auth

<span class="token keyword">func</span> <span class="token function">InitAuthRoute</span><span class="token punctuation">(</span>baseRouter <span class="token operator">*</span>routing<span class="token punctuation">.</span>RouteGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	authHandler <span class="token operator">:=</span> auth<span class="token punctuation">.</span>AuthController<span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token comment">// 登录登出</span>
	baseRouter<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> authHandler<span class="token punctuation">.</span>Login<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-swagger-doc" tabindex="-1"><a class="header-anchor" href="#_3-4-swagger-doc" aria-hidden="true">#</a> 3.4 swagger Doc</h3><p>示例：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// Login</span>
<span class="token comment">// @Summary Login</span>
<span class="token comment">// @Description user login</span>
<span class="token comment">// @Tags base</span>
<span class="token comment">// @Param deptName body auth.LoginParams true &quot;params&quot;</span>
<span class="token comment">// @Success 200 {object} auth.LoginResp &quot;{&quot;code&quot;: 200, &quot;data&quot;: [...]}&quot;</span>
<span class="token comment">// @Router /api/login [post]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-middleware" tabindex="-1"><a class="header-anchor" href="#_3-5-middleware" aria-hidden="true">#</a> 3.5 Middleware</h3><h4 id="_3-5-1-default-middleware" tabindex="-1"><a class="header-anchor" href="#_3-5-1-default-middleware" aria-hidden="true">#</a> 3.5.1 Default Middleware</h4><div class="custom-container tip"><p class="custom-container-title">Note</p><p>The system middleware is enabled by default and cannot be modified.</p></div><ul><li><p><code>middlewareRequestLink</code>: Request link middleware, used to generate <code>request_id</code> and pass <code>traceid</code> to form a request chain. Code reference: <code>server/http/middleware.go:36</code></p></li><li><p><code>middlewareCustomError</code>: Panic middleware, used to capture panics. Code reference: <code>server/http/middleware.go:91</code></p></li><li><p><code>middlewareSentinel</code>: Rate limiting middleware, used to limit the frequency of API requests. Code reference: <code>server/http/middleware.go:108</code></p></li></ul><h4 id="_3-5-2-custom-middleware" tabindex="-1"><a class="header-anchor" href="#_3-5-2-custom-middleware" aria-hidden="true">#</a> 3.5.2 Custom middleware</h4><p>示例：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> middleware
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	routing <span class="token string">&quot;github.com/gly-hub/fasthttp-routing&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">CorsMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span> routing<span class="token punctuation">.</span>Handler <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>routing<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
		c<span class="token punctuation">.</span>Response<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span>
		c<span class="token punctuation">.</span>Response<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Methods&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;POST, GET, OPTIONS, PUT, DELETE&quot;</span><span class="token punctuation">)</span>
		c<span class="token punctuation">.</span>Response<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Headers&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Content-Type, Authorization&quot;</span><span class="token punctuation">)</span>
		c<span class="token punctuation">.</span>Response<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Max-Age&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;86400&quot;</span><span class="token punctuation">)</span>
		c<span class="token punctuation">.</span>Response<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Credentials&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> c<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Header<span class="token punctuation">.</span><span class="token function">IsOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			c<span class="token punctuation">.</span><span class="token function">Abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token boolean">nil</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Registration middleware：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> auth

<span class="token keyword">func</span> <span class="token function">InitAuthRoute</span><span class="token punctuation">(</span>baseRouter <span class="token operator">*</span>routing<span class="token punctuation">.</span>RouteGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	baseRouter<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span>middleware<span class="token punctuation">.</span><span class="token function">CorsMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	authHandler <span class="token operator">:=</span> auth<span class="token punctuation">.</span>AuthController<span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token comment">// 登录登出</span>
	baseRouter<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> authHandler<span class="token punctuation">.</span>Login<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,20);function N(A,I){const t=a("ExternalLinkIcon"),i=a("RouterLink");return l(),p("div",null,[u,m,n("div",v,[h,k,b,g,n("div",T,[n("p",null,[e("Source: "),n("a",C,[e("Wikipedia"),s(t)])])])]),B,n("div",P,[f,n("h2",_,[q,e(" HTTP server performance comparison with "),n("a",G,[e("net/http"),s(t)])]),w,n("div",R,[n("p",null,[e("resource "),n("a",S,[e("fasthttp"),s(t)])])])]),E,n("div",H,[x,n("p",null,[e("The framework integrates the HTTP component, which requires configuration in the configuration file "),s(i,{to:"/guide/baseconfig.html"},{default:r(()=>[e("HTTP Configuration")]),_:1}),e(".")])]),y])}const L=c(d,[["render",N],["__file","http.html.vue"]]);export{L as default};
